<%== ERB.new(render_function).result(self.instance_eval { binding }) %>

<% if caboose_js && caboose_js.length > 1 %>
	<% caboose_js.to_a.each_with_index do |js, ind| %>
		<% next if ind == 0 %>
		<% content_for :js do %>
			<% begin %>
				<% block.cached_js = ERB.new(js).result(self.instance_eval { binding }) %>
				<% block.save %>
			<% rescue %>
				<% Caboose.log("JS ERROR for block #{block.id}") %>
			<% end %>
		<% end %>
	<% end %>
<% end %>
<% if caboose_css && caboose_css.length > 1 %>
	<% caboose_css.to_a.each_with_index do |css, ind| %>
		<% next if ind == 0 %>
		<% content_for :css do %>
			<% begin %>
				<% block.cached_css = ERB.new(css).result(self.instance_eval { binding }) %>
				<% block.save %>
			<% rescue %>
				<% Caboose.log("CSS ERROR for block #{block.id}") %>
			<% end %>
		<% end %>
	<% end %>
<% end %>